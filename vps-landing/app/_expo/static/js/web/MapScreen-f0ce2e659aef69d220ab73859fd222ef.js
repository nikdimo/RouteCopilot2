__d(function(g,_r,_i,_a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return O}});var t=_r(d[0]),o=e(_r(d[1])),n=e(_r(d[2])),l=e(_r(d[3])),i=e(_r(d[4])),a=e(_r(d[5])),s=_r(d[6]),r=e(_r(d[7])),c=_r(d[8]),u=_r(d[9]),f=_r(d[10]),h=_r(d[11]),p=_r(d[12]),x=_r(d[13]),y=e(_r(d[14])),b=_r(d[15]),C=_r(d[16]),B=_r(d[17]);_r(d[18]),_r(d[19]),_r(d[20]);var j=_r(d[21]);const S=[55.6761,12.5683],T=10,w='#0078D4',E='#107C10';function v(e,t,o,n=28){const l=n/2,i=Math.round(13*n/28),a=!o,s=a?`<div style="\n      width:${n}px;height:${n}px;border-radius:${l}px;background:${t};\n      border:2px solid #fff;box-shadow:0 1px 2px rgba(0,0,0,0.2);\n      display:flex;align-items:center;justify-content:center;\n      color:#fff;font-size:${i}px;font-weight:700;\n    ">${e}</div>`:`<div style="display:flex;flex-direction:column;align-items:center;">\n      <div style="\n        font-size:10px;font-weight:600;color:#1a1a1a;background:rgba(255,255,255,0.96);\n        padding:2px 5px;border-radius:4px;margin-bottom:2px;\n        box-shadow:0 1px 2px rgba(0,0,0,0.15);white-space:nowrap;\n      ">${o}</div>\n      <div style="\n        width:${n}px;height:${n}px;border-radius:${l}px;background:${t};\n        border:2px solid #fff;box-shadow:0 1px 2px rgba(0,0,0,0.2);\n        display:flex;align-items:center;justify-content:center;\n        color:#fff;font-size:${i}px;font-weight:700;\n      ">${e}</div>\n    </div>`,c=a?n:n+18,u=a?n:Math.max(60,n+4);return r.default.divIcon({className:'numbered-marker',html:s,iconSize:[u,c],iconAnchor:[u/2,c]})}const M=.75;function z({legs:e,selectedLegIndex:o}){const n=(0,s.useMap)(),[l,i]=(0,t.useState)('BR');if((0,t.useEffect)(()=>{if(null==o||!e[o])return;const t=e[o],l=()=>{const e=(0,B.pointAlongSegmentAndForward)(t.coordinates,M);if(e)try{const t=n.latLngToContainerPoint([e.M.latitude,e.M.longitude]),o=n.latLngToContainerPoint([e.F.latitude,e.F.longitude]),l=o.x-t.x,a=o.y-t.y,s=Math.sqrt(l*l+a*a)||1,r={x:a/s,y:-l/s};i((0,B.pickTipCornerSimple)(r,B.SEGMENT_BUBBLE_W,B.SEGMENT_BUBBLE_H))}catch{i('BR')}};return l(),n.on('moveend',l),n.on('zoomend',l),()=>{n.off('moveend',l),n.off('zoomend',l)}},[n,e,o]),null==o||!e[o])return null;const a=e[o],c=(0,B.pointAlongSegmentAndForward)(a.coordinates,M);if(!c)return null;const u=(0,x.formatDurationSeconds)(a.duration),f=(0,B.formatDistance)(a.distance),h={TL:[0,0],TR:[B.SEGMENT_BUBBLE_W,0],BL:[0,B.SEGMENT_BUBBLE_H],BR:[B.SEGMENT_BUBBLE_W,B.SEGMENT_BUBBLE_H]};return(0,j.jsx)(s.Marker,{position:[c.M.latitude,c.M.longitude],icon:r.default.divIcon({className:'segment-bubble-marker',html:`\n          <div style="position:absolute;left:0;top:0;width:${B.SEGMENT_BUBBLE_W}px;height:${B.SEGMENT_BUBBLE_H}px;pointer-events:none;">\n            <svg width="${B.SEGMENT_BUBBLE_W}" height="${B.SEGMENT_BUBBLE_H}" viewBox="0 0 ${B.SEGMENT_BUBBLE_W} ${B.SEGMENT_BUBBLE_H}">\n              <path d="${(0,B.segmentBubblePath)(l)}" fill="rgba(255,255,255,0.96)" stroke="#0078D4" stroke-width="1.5"/>\n            </svg>\n            <div style="position:absolute;left:0;top:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:#1a1a1a;pointer-events:none;">\n              <span>${u}</span>\n              <span style="font-size:10px;color:#64748b;font-weight:500">${f}</span>\n            </div>\n          </div>\n        `,iconSize:[B.SEGMENT_BUBBLE_W,B.SEGMENT_BUBBLE_H],iconAnchor:h[l]})})}function k({coords:e}){const o=(0,s.useMap)();return(0,t.useEffect)(()=>{if(0!==e.length)try{1===e.length?o.setView(e[0],14):o.fitBounds(r.default.latLngBounds(e),{padding:[60,60],maxZoom:14})}catch{}},[o,e]),null}function L({onClear:e}){const o=(0,s.useMap)();return(0,t.useEffect)(()=>(o.on('click',e),()=>o.off('click',e)),[o,e]),null}function _({coord:e,zoom:o}){const n=(0,s.useMap)();return(0,t.useEffect)(()=>{e&&n.setView([e.latitude,e.longitude],o)},[n,e?.latitude,e?.longitude,o]),null}const $='#D13438';function D({coordList:e,coords:o,etas:n,legStress:l,focusedClusterKey:i,onSelect:a}){const r=(0,s.useMap)(),[c,u]=(0,t.useState)(()=>r.getZoom());(0,t.useEffect)(()=>{const e=()=>u(r.getZoom());return r.on('zoomend',e),r.on('moveend',e),()=>{r.off('zoomend',e),r.off('moveend',e)}},[r]);const f=(0,t.useMemo)(()=>(0,p.getMarkerPositions)(e,c,{focusedClusterKey:i,focusedPixelGap:64}),[e,c,i]);return(0,j.jsxs)(j.Fragment,{children:[f.map(({index:e,coordinate:t,realCoordinate:o,clusterKey:n,isCluster:l})=>{if(null!=o){const n=[[t.latitude,t.longitude],[o.latitude,o.longitude]];return(0,j.jsx)(s.Polyline,{positions:n,pathOptions:{color:'#64748b',weight:2,opacity:.8,dashArray:'4, 4'}},`connector-${e}`)}return null}),f.map(({index:e,coordinate:t,realCoordinate:r,clusterKey:c,isCluster:u})=>{const f='completed'===o[e].status?'#808080':'late'===l?.[e]?$:w,h=[t.latitude,t.longitude],p=n[e],y=null!=p?(0,x.formatTime)(p):void 0,b=v(e+1,f,y,u&&null!=c&&c===i?40:28),C=u&&null!=c?{clusterKey:c,coordinate:t,isCluster:!0}:null;return(0,j.jsx)(s.Marker,{position:h,icon:b,eventHandlers:{click:()=>a(e,C)}},`waypoint-${e}`)})]})}function W(e,t){const o=`https://www.google.com/maps/search/?api=1&query=${e},${t}`;window.open(o,'_blank','noopener,noreferrer')}const H=17;function O({embeddedInSchedule:e}={}){const l=(0,c.useNavigation)(),{selectedDate:p,setSelectedDate:v,meetingCountByDay:M,highlightWaypointIndex:$,setHighlightWaypointIndex:O}=(0,u.useRoute)(),R=(0,b.useEnsureMeetingCountsForDate)(),[I,N]=(0,t.useState)(!1),[G,F]=(0,t.useState)(null),[U,V]=(0,t.useState)(null),[K,Z]=(0,t.useState)(null),[q,J]=(0,t.useState)(null),{load:Q}=(0,f.useLoadAppointmentsForDate)(void 0),X=(0,t.useCallback)(()=>{F(null),V(null),Z(null),J(null)},[]),Y=(0,h.useRouteData)(),{appointments:ee,coords:te,osrmRoute:oe,routeLoading:ne,departByMs:le,returnByMs:ie,allCoordsForFit:ae,fullPolyline:se,etas:re,homeBase:de,homeBaseLabel:ce}=Y,ue=Y.legStress??[],fe=e=>{const t=ue[e];return'late'===t?'#D13438':'tight'===t?'#C19C00':w},he=(0,t.useMemo)(()=>(0,C.startOfDay)(new Date),[]);(0,c.useFocusEffect)((0,t.useCallback)(()=>{0===ee.length&&(0,C.isSameDay)(p,he)&&Q(),e||R(p)},[Q,ee.length,e,R,p,he]));const ge=(0,C.isSameDay)(p,he)?"Today's Route":(0,C.format)(p,'EEE, MMM d'),me=(0,t.useCallback)(e=>{X(),v(e),R(e)},[X,v,R]);(0,t.useEffect)(()=>{X()},[p,X]),(0,t.useEffect)(()=>{const e=$;'number'==typeof e&&null!=te[e]&&(F(e),V([e]),Z(null),J(null),O(null))},[$,te,O]),(0,t.useLayoutEffect)(()=>{e||l.setOptions?.({headerTitle:ge,headerStyle:{backgroundColor:w},headerTintColor:'#fff'})},[e,l,ge]);const pe=(0,t.useMemo)(()=>ae.map(e=>[e.latitude,e.longitude]),[ae]),xe=(0,t.useMemo)(()=>te.map(e=>e.coordinates),[te]),ye=(0,t.useMemo)(()=>se.map(e=>[e.latitude,e.longitude]),[se]),be=se.length>0;if(0===ee.length)return(0,j.jsxs)(o.default,{style:P.container,children:[!e&&(0,j.jsx)(y.default,{selectedDate:p,onSelectDate:me,meetingCountByDay:M}),(0,j.jsx)(o.default,{style:P.placeholderContainer,children:(0,j.jsx)(n.default,{style:P.placeholderText,children:"No meetings loaded. Go to Schedule to load your route."})})]});if(0===te.length)return(0,j.jsxs)(o.default,{style:P.container,children:[!e&&(0,j.jsx)(y.default,{selectedDate:p,onSelectDate:me,meetingCountByDay:M}),(0,j.jsx)(o.default,{style:P.placeholderContainer,children:(0,j.jsx)(n.default,{style:P.placeholderText,children:"No locations with addresses. Add addresses to your meetings to see them on the map."})})]});return(0,j.jsxs)(o.default,{style:P.container,children:[!e&&(0,j.jsx)(y.default,{selectedDate:p,onSelectDate:me,meetingCountByDay:M}),!e&&ne&&(0,j.jsx)(o.default,{style:P.loadingBar,children:(0,j.jsx)(n.default,{style:P.loadingBarText,children:"Loading route\u2026"})}),(0,j.jsx)(i.default,{style:P.detailsButton,onPress:()=>N(e=>!e),activeOpacity:.8,children:(0,j.jsx)(n.default,{style:P.detailsButtonText,children:I?'Hide details':'Show details'})}),I&&(0,j.jsxs)(a.default,{style:P.detailsOverlay,contentContainerStyle:P.detailsOverlayContent,children:[be&&(0,j.jsxs)(o.default,{style:[P.detailsCard,P.detailsCardHome],children:[(0,j.jsx)(o.default,{style:[P.detailsBadge,{backgroundColor:E}],children:(0,j.jsx)(n.default,{style:P.detailsBadgeText,children:"H"})}),(0,j.jsxs)(o.default,{style:P.detailsCardContent,children:[(0,j.jsx)(n.default,{style:P.detailsCardTitle,children:ce}),(0,j.jsxs)(n.default,{style:P.detailsCardTime,children:["Depart by ",(0,x.formatTime)(le)," \xb7 Return ~",(0,x.formatTime)(ie)]})]})]}),te.map((e,t)=>(0,j.jsxs)(o.default,{style:P.detailsCard,children:[(0,j.jsx)(o.default,{style:[P.detailsBadge,{backgroundColor:'completed'===e.status?'#808080':w}],children:(0,j.jsx)(n.default,{style:P.detailsBadgeText,children:t+1})}),(0,j.jsxs)(o.default,{style:P.detailsCardContent,children:[(0,j.jsx)(n.default,{style:P.detailsCardTitle,children:e.title}),(0,j.jsxs)(n.default,{style:P.detailsCardTime,children:[e.time,null!=re[t]&&(0,j.jsxs)(j.Fragment,{children:[" \xb7 Arrive ~",(0,x.formatTime)(re[t])]})]}),(0,j.jsx)(n.default,{style:P.detailsCardAddress,children:e.location}),(0,j.jsx)(i.default,{onPress:()=>W(e.coordinates.latitude,e.coordinates.longitude),children:(0,j.jsx)(n.default,{style:P.detailsCardLink,children:"Open in Google Maps"})})]})]},e.id))]}),(0,j.jsx)("div",{style:{position:'absolute',top:0,left:0,right:0,bottom:0,width:'100%',height:'100%',minHeight:400},children:(0,j.jsxs)(s.MapContainer,{center:S,zoom:T,scrollWheelZoom:!0,style:{width:'100%',height:'100%',minHeight:400},children:[(0,j.jsx)(s.TileLayer,{attribution:"\xa9 <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,j.jsx)(k,{coords:pe}),(0,j.jsx)(_,{coord:q,zoom:H}),(0,j.jsx)(L,{onClear:X}),be&&(0,j.jsx)(s.Marker,{position:[de.lat,de.lon],icon:r.default.divIcon({className:'home-marker',html:`<div style="\n      width:28px;height:28px;border-radius:14px;background:${E};\n      border:2px solid #fff;box-shadow:0 1px 2px rgba(0,0,0,0.2);\n      display:flex;align-items:center;justify-content:center;\n      color:#fff;font-size:12px;font-weight:700;\n    ">H</div>`,iconSize:[28,28],iconAnchor:[14,14]}),children:(0,j.jsx)(s.Popup,{children:(0,j.jsxs)("div",{style:A.container,children:[(0,j.jsx)("div",{style:Object.assign({},A.badge,{color:E}),children:"Home Base"}),(0,j.jsx)("strong",{style:A.title,children:ce}),(0,j.jsxs)("div",{style:A.time,children:["Depart by ",(0,x.formatTime)(le)]}),(0,j.jsxs)("div",{style:A.time,children:["Return ~",(0,x.formatTime)(ie)]})]})})}),(0,j.jsx)(D,{coordList:xe,coords:te,etas:re,legStress:ue,focusedClusterKey:K,onSelect:(e,t)=>{Z(null),J(null),F(e),V([e])}}),oe?.legs?(()=>{const e=25e-5,t=oe.legs,o=e=>e.map(e=>[e.latitude,e.longitude]),n=[];for(let l=1;l<t.length;l++){const i=t[l];if(i.coordinates.length<2)continue;if(l===G)continue;if('late'===ue[l])continue;const a=l%2==1?1:-1,r=(0,B.offsetPolyline)(i.coordinates,e,a);n.push((0,j.jsx)(s.Polyline,{positions:o(r),pathOptions:{color:fe(l),weight:4}},l))}for(let l=1;l<t.length;l++){const i=t[l];if(i.coordinates.length<2)continue;if(l===G)continue;if('late'!==ue[l])continue;const a=l%2==1?1:-1,r=(0,B.offsetPolyline)(i.coordinates,e,a);n.push((0,j.jsx)(s.Polyline,{positions:o(r),pathOptions:{color:fe(l),weight:9}},`late-${l}`))}if(null!==G&&G<t.length-1&&t[G]?.coordinates.length>=2){const l=G,i=t[l],a=o(0===l?i.coordinates:(0,B.offsetPolyline)(i.coordinates,e,l%2==1?1:-1));n.push((0,j.jsx)(s.Polyline,{positions:a,pathOptions:{color:E,weight:7}},`highlight-${l}`))}return n})():ye.length>=2&&(0,j.jsx)(s.Polyline,{positions:ye,pathOptions:{color:'#00B0FF',weight:4}}),oe?.legs&&oe.legs.length>0&&(0,j.jsx)(z,{legs:oe.legs,selectedLegIndex:G})]})}),U&&U.length>0&&U.every(e=>null!=te[e])&&(0,j.jsx)(o.default,{style:P.bottomCardContainer,pointerEvents:"box-none",children:(0,j.jsx)(o.default,{style:[P.bottomCard],children:1===U.length?(()=>{const e=U[0],t=te[e];if(!t)return null;const o=re[e];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n.default,{style:P.bottomCardTitle,children:t.title??'Meeting'}),t.location?(0,j.jsx)(n.default,{style:P.bottomCardAddress,children:t.location}):null,null!=o&&(0,j.jsxs)(n.default,{style:P.bottomCardTime,children:["Arrive ~",(0,x.formatTime)(o)]}),(0,j.jsx)(i.default,{style:P.bottomCardButton,onPress:()=>W(t.coordinates.latitude,t.coordinates.longitude),children:(0,j.jsx)(n.default,{style:P.bottomCardButtonText,children:"Open in Google Maps"})}),t.phone?(0,j.jsx)("a",{href:`tel:${t.phone}`,style:P.bottomCardButtonLink,children:"Call"}):null,(0,j.jsx)(i.default,{style:P.bottomCardClose,onPress:X,children:(0,j.jsx)(n.default,{style:P.bottomCardCloseText,children:"Close"})})]})})():(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(n.default,{style:P.bottomCardClusterTitle,children:[U.length," waypoints at this location"]}),(0,j.jsx)(a.default,{style:P.bottomCardScroll,children:U.map(e=>{const t=te[e];if(!t)return null;const l=re[e];return(0,j.jsxs)(o.default,{style:P.bottomCardItem,children:[(0,j.jsxs)(n.default,{style:P.bottomCardTitle,children:[e+1,". ",t.title??'Meeting']}),t.location?(0,j.jsx)(n.default,{style:P.bottomCardAddress,children:t.location}):null,(0,j.jsxs)(n.default,{style:P.bottomCardTime,children:[t.time,null!=l&&` \xb7 Arrive ~${(0,x.formatTime)(l)}`]}),(0,j.jsx)(i.default,{style:P.bottomCardButton,onPress:()=>W(t.coordinates.latitude,t.coordinates.longitude),children:(0,j.jsx)(n.default,{style:P.bottomCardButtonText,children:"Open in Google Maps"})}),t.phone?(0,j.jsx)("a",{href:`tel:${t.phone}`,style:P.bottomCardButtonLink,children:"Call"}):null]},t.id)})}),(0,j.jsx)(i.default,{style:P.bottomCardClose,onPress:X,children:(0,j.jsx)(n.default,{style:P.bottomCardCloseText,children:"Close"})})]})})})]})}const P=l.default.create({container:{flex:1,minHeight:400},placeholderContainer:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#f8fafc',padding:24},placeholderText:{fontSize:16,color:'#64748b',textAlign:'center'},loadingBar:{position:'absolute',top:0,left:0,right:0,zIndex:999,backgroundColor:'rgba(0,120,212,0.9)',paddingVertical:8,paddingHorizontal:16,alignItems:'center'},loadingBarText:{fontSize:13,fontWeight:'600',color:'#fff'},detailsButton:{position:'absolute',top:12,right:12,zIndex:1e3,backgroundColor:'rgba(255,255,255,0.95)',paddingVertical:8,paddingHorizontal:12,borderRadius:8,elevation:4,shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4},detailsButtonText:{fontSize:13,fontWeight:'600',color:w},detailsOverlay:{position:'absolute',bottom:16,left:16,right:16,maxHeight:'45%',backgroundColor:'rgba(255,255,255,0.96)',borderRadius:12,zIndex:1e3,elevation:6,shadowColor:'#000',shadowOffset:{width:0,height:4},shadowOpacity:.25,shadowRadius:8},detailsOverlayContent:{padding:12,paddingBottom:16},detailsCard:{flexDirection:'row',padding:10,marginBottom:8,backgroundColor:'#f8fafc',borderRadius:8},detailsCardHome:{backgroundColor:'rgba(16,124,16,0.1)',borderLeftWidth:4,borderLeftColor:E},detailsBadge:{width:24,height:24,borderRadius:12,alignItems:'center',justifyContent:'center',marginRight:10},detailsBadgeText:{color:'#fff',fontSize:12,fontWeight:'700'},detailsCardContent:{flex:1},detailsCardTitle:{fontSize:14,fontWeight:'700',color:'#1a1a1a',marginBottom:2},detailsCardTime:{fontSize:12,color:'#605E5C',marginBottom:2},detailsCardAddress:{fontSize:11,color:'#64748b',marginBottom:6},detailsCardLink:{fontSize:12,fontWeight:'600',color:w},bottomCardContainer:{position:'absolute',left:0,right:0,bottom:0,paddingHorizontal:16,paddingBottom:24,zIndex:15,justifyContent:'flex-end'},bottomCard:{backgroundColor:'#fff',padding:16,borderRadius:12,maxHeight:'40%',elevation:8,shadowColor:'#000',shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:8},bottomCardTitle:{fontSize:14,fontWeight:'700',color:'#1a1a1a',marginBottom:4},bottomCardAddress:{fontSize:11,color:'#64748b',marginBottom:4},bottomCardTime:{fontSize:12,color:'#605E5C',marginBottom:8},bottomCardClusterTitle:{fontSize:12,fontWeight:'600',color:'#64748b',marginBottom:10},bottomCardScroll:{maxHeight:200,marginBottom:8},bottomCardItem:{paddingVertical:8,borderBottomWidth:1,borderBottomColor:'#e2e8f0'},bottomCardButton:{paddingVertical:8,paddingHorizontal:12,backgroundColor:w,borderRadius:6,marginBottom:6,alignItems:'center'},bottomCardButtonText:{fontSize:12,fontWeight:'600',color:'#fff'},bottomCardButtonLink:{display:'block',marginBottom:8,fontSize:12,fontWeight:'600',color:w,textAlign:'center',textDecoration:'none'},bottomCardClose:{paddingVertical:8,alignItems:'center'},bottomCardCloseText:{fontSize:12,fontWeight:'600',color:w}}),A={container:{padding:4,minWidth:160},badge:{fontSize:10,fontWeight:700,marginBottom:4},title:{display:'block',marginBottom:6,fontSize:14},time:{display:'block',marginBottom:4,fontSize:12,color:'#605E5C'},address:{display:'block',marginBottom:8,fontSize:11,color:'#64748b'},clusterTitle:{fontSize:12,fontWeight:600,color:'#64748b',marginBottom:10},clusterItem:{marginBottom:14,paddingBottom:10,borderBottom:'1px solid #e2e8f0'},button:{padding:'6px 12px',backgroundColor:w,color:'white',border:'none',borderRadius:6,fontSize:12,fontWeight:600,cursor:'pointer'},buttonLink:{display:'block',marginTop:6,textAlign:'center',textDecoration:'none'}}},3108,[36,219,558,44,1167,255,3112,3113,705,845,1156,3016,3111,3006,3007,3020,846,3012,3114,3115,3116,153]);
__d(function(g,r,_i,_a,m,e,d){"use strict";function t(t){return`${t.latitude.toFixed(5)},${t.longitude.toFixed(5)}`}function n(n){const o=new Map;for(let i=0;i<n.length;i++){const s=t(n[i]),c=o.get(s)??[];c.push(i),o.set(s,c)}return Array.from(o.entries()).map(([t,o])=>({coordKey:t,indices:o,coordinate:n[o[0]]}))}Object.defineProperty(e,'__esModule',{value:!0}),e.coordKey=t,e.getClusters=n,Object.defineProperty(e,"MARKER_DIAMETER_PX",{enumerable:!0,get:function(){return o}}),e.getMarkerOffsetDegrees=i,e.getMarkerOffsetDegreesFromRegion=s,e.getMarkerPositions=function(t,c,u={},a){const{focusedClusterKey:l,focusedPixelGap:f=64}=u,h=n(t),M=[];for(const t of h){const{coordKey:n,indices:u,coordinate:h}=t,p=h.latitude,x=u.length>1&&l===n?f:o,y=a?s(a.longitudeDelta,a.screenWidth,p,x):i(c,p,x);if(1===u.length){M.push({index:u[0],coordinate:h});continue}const P=u.length,K=h.longitude-(P-1)/2*y;for(let t=0;t<P;t++)M.push({index:u[t],coordinate:{latitude:h.latitude,longitude:K+t*y},realCoordinate:h,clusterKey:n,isCluster:!0})}return M.sort((t,n)=>t.index-n.index)};const o=28;function i(t,n,i=o){const s=n*Math.PI/180,c=Math.max(.01,Math.cos(s));return i/(256*Math.pow(2,t)/360*c)}function s(t,n,i,s=o){const c=i*Math.PI/180;return s*(t/n/Math.max(.01,Math.cos(c)))}},3111,[]);